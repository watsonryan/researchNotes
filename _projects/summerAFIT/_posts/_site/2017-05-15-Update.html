<h1 id="initial-testing">Initial Testing</h1>

<h2 id="generating-gps-data">Generating GPS data</h2>

<p>Using <a href="https://github.com/jsngross/WVUPNG/tree/master/matlab/pppINSSim">PPP/INS</a> simulator to generate GPS observables for two GNSS receivers, which are rigidly mounted to a platform. One receiver will be high fidelity ( i.e. final products with good models ) but the observables could have faults $ f \sim \mathcal{N}(0,25) $. The second receiver is lower fidelity ( positioning error $ \sim 15 m$ ); however, the observables generated by this receiver will have no faults.</p>

<h2 id="simulated-data">Simulated Data</h2>

<p>Generated 10 Hz GNSS observables for the flight profile depicted below.</p>

<p><img src="http://i1347.photobucket.com/albums/p701/rwatso12/flightPath_zps0hlmqd8z.png" alt="ENU Path" align="middle" /></p>

<p align="center">
Generated ENU flight profile
</p>

<p><img src="http://i1347.photobucket.com/albums/p701/rwatso12/velProfile_zps1njs5anz.png" alt="ENU Velocity" align="middle" /></p>
<p align="center">
Generated ENU velocity profile
</p>

<p><img src="http://i1347.photobucket.com/albums/p701/rwatso12/attProfile_zpsf8v87zpg.png" alt="Attitude" align="middle" /></p>
<p align="center">
Generated attitude profile
</p>

<h2 id="building-graph">Building Graph</h2>

<p>For this initial test, we are assuming that we have one high quality receiver with erronous data, and one lower quality receiver with fault free data. With this data, we can construct the pose graph using the low quality receiver ( i.e. take the low quality receiver position as truth ) and optimze the position using the high fidelity receivers raw observables.</p>

<p><img src="http://i1347.photobucket.com/albums/p701/rwatso12/initialGraph_zpsitvad4hw.png" alt="Initial Graph" align="middle" /></p>
<p align="center">
Inital factor graph
</p>

<p>In the graph, $e_i$ represents an error function or probabilistic constraints applied to the state at the specified time-step. When Gaussian noise is assumed, the error function is equivalent to the innovation residual of the traditional Kalman filter. Utilizing this information it is easy to see that the optimal state estimate can be calculated through a traditional non-linear least squares formulation ( i.e., Levenberg Marquardt ) that minimizes the error over the graph.</p>

<script type="math/tex; mode=display">e_i = H_i(X_i) - Z_i</script>

<script type="math/tex; mode=display">\hat{X} = argmin \sum_i  \lvert \lvert e_i \rvert \rvert^{2}_{\Sigma}</script>

<p>Whenever errors are present in the observations, methods to make the optimization more robust must be incorporated. One such method is the switchable constraint, which can be thought of as an observation weight that is be optimized concurrently with the state estimates. The addition of the switchable constraint to the optimization processes modifies the cost function. The modified cost function is provided below, where s is the switchable constraint which is confined to the interval of zero to one. A graphical depiction of this is shown in the Figure below, where observable $m$ at epoch $n$ exceeded the pre-defined residual threshold.</p>

<script type="math/tex; mode=display">\hat{X} = argmin \sum_i  \lvert \lvert e_i \rvert \rvert^{2}_{\Sigma} + \sum_i  \lvert \lvert s_i * e_i \rvert \rvert^{2}_{\Sigma} + \sum_i  \lvert \lvert 1 - s_i \rvert \rvert^{2}_{\Xi}</script>

<p><img src="http://i1347.photobucket.com/albums/p701/rwatso12/switchGraph_zpstxvtoyp7.png" alt="Switch Factor Graph" align="middle" /></p>
<p align="center">
Graph with switch factors incorporated
</p>

<h2 id="sensitivity-testing">Sensitivity Testing:</h2>

<h3 id="1-faults-randomly-added-to-observables-">1) Faults randomly added to observables :</h3>

<h3 id="2-slowing-increase-magnitude-of-fault-on-specific-satellite">2) Slowing increase magnitude of fault on specific satellite</h3>
