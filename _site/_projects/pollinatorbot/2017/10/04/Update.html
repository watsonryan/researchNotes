<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Occupancy Grid Generation</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="https://watsonryan.github.io/researchNotes/css/main.css">
    <link rel="canonical" href="https://watsonryan.github.io/researchNotes/_projects/pollinatorbot/2017/10/04/Update.html">

<!-- meta robots -->
    

<!-- loading fonts -->
    <!-- Open Sans -->
    <link href="https://watsonryan.github.io/researchNotes/_assets/open_sans/style.css" rel="stylesheet">

    <!-- own icon font, created via https://icomoon.io/  -->
    <link href="https://watsonryan.github.io/researchNotes/_assets/lablogIcons/style.css" rel="stylesheet">

    <!-- Ubuntu Mono for code -->
    <link href="https://watsonryan.github.io/researchNotes/_assets/Ubuntu_Mono/style.css" rel='stylesheet' type='text/css'>

<!-- mathjax.org for math equations -->
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    imageFont: null,
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]} ,
    menuSettings: { context: "Browser" }
    });
    </script>

    <script type="text/javascript"  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

<!-- highlight.js for code syntax highlighting-->
<link rel="stylesheet" href="https://watsonryan.github.io/researchNotes/_assets/highlight/styles/github.css">
<script src="https://watsonryan.github.io/researchNotes/_assets/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!--<link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/default.min.css">
<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>-->


</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/researchNotes/index.html">Research Notes</a>

  <nav  class="main-menu">
  <input type="checkbox" id="menu" />
  <label for="menu"></label>
  <div class="trigger">

    <a class="page-link" href="/researchNotes/index.html"><span style = "font-family: 'lablogIcons';">  &#xe605; </span> Research Notes</a>

    
      <a class="page-link" href="/researchNotes/tasks.html"><span style = "font-family: 'lablogIcons';">  &#xf046; </span> Tasks</a>
    

    
<a class="page-link" href="/researchNotes/tags.html"><span style = "font-family: 'lablogIcons';">  &#xe600; </span> Tags</a>
    

    
      <a class="page-link" href="/researchNotes/archive.html"><span style = "font-family: 'lablogIcons';">  &#xe602; </span> Archive</a>
    

    <br>

    
      <a class="page-link" href="/researchNotes/_projects/dirichletRobustPoseGraph/dirichletRobustPoseGraph.html">
        <span style = "font-family: 'lablogIcons';">  &#xe60a; </span>
        
        
        Pose Graph :: Dirichlet
      </a>
    
      <a class="page-link" href="/researchNotes/_projects/pollinatorBot/pollinatorBot.html">
        <span style = "font-family: 'lablogIcons';">  &#xe60a; </span>
        
        
        Pollinator Bot Updates
      </a>
    
      <a class="page-link" href="/researchNotes/_projects/robustEstDev/robustEstDev.html">
        <span style = "font-family: 'lablogIcons';">  &#xe60a; </span>
        
        
        Robust Est. Derivation
      </a>
    
      <a class="page-link" href="/researchNotes/_projects/robustGNSSGraph/robustGNSSGraph.html">
        <span style = "font-family: 'lablogIcons';">  &#xe60a; </span>
        
        
        Robust GNSS :: F.G.
      </a>
    
      <a class="page-link" href="/researchNotes/_projects/topologyRobustPoseGraph/topologyRobustPoseGraph.html">
        <span style = "font-family: 'lablogIcons';">  &#xe60a; </span>
        
        
        Pose Graph :: Topology
      </a>
    
      <a class="page-link" href="/researchNotes/_projects/tutorials/tutorials.html">
        <span style = "font-family: 'lablogIcons';">  &#xe60a; </span>
        
        
        Tutorials
      </a>
    

    

    <br>

    
    <div class="menu-content">
      

    </div>
    

    

  </div>

  </nav>


  </div>


</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Occupancy Grid Generation</h1>
    <p class="post-meta">Oct 4, 2017 • Ryan Watson</p>

    
    <div>
     
       <a href="/researchNotes/tags.html#pollinatorBot" title="Pages tagged pollinatorBot" rel="tag" class = "tag"> pollinatorBot </a>  &nbsp
     
       <a href="/researchNotes/tags.html#bumble+bot" title="Pages tagged bumble bot" rel="tag" class = "tag"> bumble bot </a>  &nbsp
     
       <a href="/researchNotes/tags.html#blam+test" title="Pages tagged blam test" rel="tag" class = "tag"> blam test </a>  &nbsp
     
       <a href="/researchNotes/tags.html#occupancy+grid" title="Pages tagged occupancy grid" rel="tag" class = "tag"> occupancy grid </a>  &nbsp
     
    </div>
    

  </header>

  <article class="post-content">
    <h2 id="occupancy-grid-generation-from-3d-slam-map">Occupancy Grid Generation from 3D SLAM Map</h2>

<p>To test our ability to generate an accurate occupancy grid, we will utilize the data-set collected in the green house on 10/3/17. For now, we are only concerned with a 2d occupancy grid to simplify the planning algorithms. To construct a 2d occupancy grid we can compress the 3d structure generated by our SLAM algorithm, as shown in the first video, into a 2d occupancy grid.</p>

<p><br /></p>
<p align="center">
<iframe width="640" height="360" src="https://www.youtube.com/embed/xc8gBKzkVDM" frameborder="0" allowfullscreen=""></iframe>
</p>
<p><br /><br /></p>
<p align="center">
SLAM solution with new greenhouse dataset 
</p>
<p><br /></p>

<p>Initially we tried to compress the whole 3d structure to generate an occupancy grid as provided in the second video. As can be seen, the quality of the generated occupancy grid is of poor quality.</p>

<p><br /></p>
<p align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/V52x5girnSs" frameborder="0" allowfullscreen=""></iframe>
</p>
<p><br /><br /></p>
<p align="center">
First attempt at occupancy grid generation 
</p>
<p><br /></p>

<p>In an attempt to generate a higher fidelity occupancy grid, we can restrict the amount of the 3d structure that we compress (i.e., we know that robot’s height, so we don’t need to be concerned about occupied grid points above it). Using this technique the cost map was generated again, as provided in the third video. As can be seen, this map is much high fidelity.</p>

<p><br /></p>
<p align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/DRhahWNKARo" frameborder="0" allowfullscreen=""></iframe>
</p>
<p><br /><br /></p>
<p align="center">
Second attempt at occupancy grid generation 
</p>
<p><br /></p>

<h3 id="next-steps-">Next Steps :</h3>

<p>Next, I will try to do some clustering over the occupancy grid and calculate the convex hull of each blob to make it an easier environment for path planning. <br />
<br /><br /></p>

<h2 id="gnss-data">GNSS Data</h2>

<p>In addition to lidar, we also have a NovAtel SPAN system on board, which collectes GNSS/INS observables. To extract the NovAtel data from the ROS bag, the following three commands can be utilized, where the final file, gps.bin, can be converted to a RINEX file with NovAtels conversion software.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rostopic <span class="nb">echo</span> -b ~/path/to/file -p /gps_data &gt; gps.data
<span class="gp">$ </span><span class="nb">cd</span> <span class="nv">$WVUPNG</span>
<span class="gp">$ </span>./bin/rosBagToBin.py -i gps.data -o gps.bin
</code></pre>
</div>

<p>For some reason, on this data collect, we did not get a GNSS fix; however, we did collect INS data.</p>

<p align="center">
<a href="https://lh3.googleusercontent.com/jXTFq9aHQgN2i11DR0uuXoRFarQQCFwHsHfI1nbfetSLOdRQU5_hOXCgwGRbjilITjuKoyPABVJFD67tCZoRMdVGsi2cujaDEy72p4TqwP88yWnM_OMIwutMzapYtOLe-5rSb_Mr5TTmXK7xMYFzb8D2ndOBIJTJ16aMm9gvCrVAzvKTj3ZN_v8WKz8iKeQeKTbOv2ED3z4boUHlZAXr9G1jKglLOzHT9FRbnAtvuYrveeBxG0bEZ4XcEd5r2AZAot-t_MU-uNgTePMDaubf02Z9otv23zY0pUv6j7TWE79SQA-HsArgVxKOHDpLBVPQIg_9WHj-bV1NkhzVo0H19nr0RZWnMgB-1cajAajSi45p3FYBPt5ZlpRycYDdAOadQbjZzIFL3k87zgfXHwXFLbCn3w1rD_ILNfJIwAhWRJr9yHZxiawFYJUo1vEV1ZWBmIEzIk-Sv7WxoAAa1nJHO9317RltQgq78FPepkLM1Um-ecRFi7d0tUgsYOLtkLv2twLQK8PprwtaP3CUrlzbVUczw-bStPIizncyiesnWiS4AeKLH6tpdc56QU-0YMpiEIZq5wuhXAYVhLMtzuNvAF6TbosuGRe-vcH7sxD2Yx8889gu2nOYf841sseYFgo7t3vAQcdHckojW0zLX-6ADJGcKa_8KD0KO9c=w652-h168-no" target="_blank"><img src="https://lh3.googleusercontent.com/jXTFq9aHQgN2i11DR0uuXoRFarQQCFwHsHfI1nbfetSLOdRQU5_hOXCgwGRbjilITjuKoyPABVJFD67tCZoRMdVGsi2cujaDEy72p4TqwP88yWnM_OMIwutMzapYtOLe-5rSb_Mr5TTmXK7xMYFzb8D2ndOBIJTJ16aMm9gvCrVAzvKTj3ZN_v8WKz8iKeQeKTbOv2ED3z4boUHlZAXr9G1jKglLOzHT9FRbnAtvuYrveeBxG0bEZ4XcEd5r2AZAot-t_MU-uNgTePMDaubf02Z9otv23zY0pUv6j7TWE79SQA-HsArgVxKOHDpLBVPQIg_9WHj-bV1NkhzVo0H19nr0RZWnMgB-1cajAajSi45p3FYBPt5ZlpRycYDdAOadQbjZzIFL3k87zgfXHwXFLbCn3w1rD_ILNfJIwAhWRJr9yHZxiawFYJUo1vEV1ZWBmIEzIk-Sv7WxoAAa1nJHO9317RltQgq78FPepkLM1Um-ecRFi7d0tUgsYOLtkLv2twLQK8PprwtaP3CUrlzbVUczw-bStPIizncyiesnWiS4AeKLH6tpdc56QU-0YMpiEIZq5wuhXAYVhLMtzuNvAF6TbosuGRe-vcH7sxD2Yx8889gu2nOYf841sseYFgo7t3vAQcdHckojW0zLX-6ADJGcKa_8KD0KO9c=w652-h168-no" border="0" alt=" photo imgonline-com-ua-twotoone-XEN5fUgMoaSc_zpsliygmo1g.jpg" /></a>
</p>
<p align="center">
Fig 1 :: GNSS Data Extraction   
</p>
<p><br /></p>

  </article>

</div>

<div class="related-posts">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3>Related Posts:</h3>
  <ul>
  
  <li class="relatedPost">
  <a href="/researchNotes/_projects/pollinatorbot/2017/10/09/Update.html">Initial Test of Dense RGB-D SLAM in Greenhouse
  </a> <span class = "post-meta"> • October  9, 2017</span>
  
  <span class = "post-meta"> • </span>
  
    <a href="/researchNotes/tags.html#pollinatorBot" title="Pages tagged pollinatorBot" rel="tag" class = "tag"> pollinatorBot </a>  &nbsp
  
    <a href="/researchNotes/tags.html#bumble+bot" title="Pages tagged bumble bot" rel="tag" class = "tag"> bumble bot </a>  &nbsp
  
    <a href="/researchNotes/tags.html#blam+test" title="Pages tagged blam test" rel="tag" class = "tag"> blam test </a>  &nbsp
  
    <a href="/researchNotes/tags.html#occupancy+grid" title="Pages tagged occupancy grid" rel="tag" class = "tag"> occupancy grid </a>  &nbsp
  
  

  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="relatedPost">
  <a href="/researchNotes/_projects/pollinatorbot/2017/09/18/Update.html">ISAM2 Speed Test with BLAM
  </a> <span class = "post-meta"> • September 18, 2017</span>
  
  <span class = "post-meta"> • </span>
  
    <a href="/researchNotes/tags.html#pollinatorBot" title="Pages tagged pollinatorBot" rel="tag" class = "tag"> pollinatorBot </a>  &nbsp
  
    <a href="/researchNotes/tags.html#bumble+bot" title="Pages tagged bumble bot" rel="tag" class = "tag"> bumble bot </a>  &nbsp
  
    <a href="/researchNotes/tags.html#blam+test" title="Pages tagged blam test" rel="tag" class = "tag"> blam test </a>  &nbsp
  
    <a href="/researchNotes/tags.html#occupancy+grid" title="Pages tagged occupancy grid" rel="tag" class = "tag"> occupancy grid </a>  &nbsp
  
  

  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="relatedPost">
  <a href="/researchNotes/_projects/pollinatorbot/2017/09/13/Update.html">Inital SLAM Test on Gigabyte Board
  </a> <span class = "post-meta"> • September 13, 2017</span>
  
  <span class = "post-meta"> • </span>
  
    <a href="/researchNotes/tags.html#pollinatorBot" title="Pages tagged pollinatorBot" rel="tag" class = "tag"> pollinatorBot </a>  &nbsp
  
    <a href="/researchNotes/tags.html#bumble+bot" title="Pages tagged bumble bot" rel="tag" class = "tag"> bumble bot </a>  &nbsp
  
    <a href="/researchNotes/tags.html#blam+test" title="Pages tagged blam test" rel="tag" class = "tag"> blam test </a>  &nbsp
  
    <a href="/researchNotes/tags.html#occupancy+grid" title="Pages tagged occupancy grid" rel="tag" class = "tag"> occupancy grid </a>  &nbsp
  
  

  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="relatedPost">
  <a href="/researchNotes/_projects/pollinatorbot/2017/09/11/Update.html">Generating occupancy map with BLAM
  </a> <span class = "post-meta"> • September 11, 2017</span>
  
  <span class = "post-meta"> • </span>
  
    <a href="/researchNotes/tags.html#pollinatorBot" title="Pages tagged pollinatorBot" rel="tag" class = "tag"> pollinatorBot </a>  &nbsp
  
    <a href="/researchNotes/tags.html#bumble+bot" title="Pages tagged bumble bot" rel="tag" class = "tag"> bumble bot </a>  &nbsp
  
    <a href="/researchNotes/tags.html#blam+test" title="Pages tagged blam test" rel="tag" class = "tag"> blam test </a>  &nbsp
  
    <a href="/researchNotes/tags.html#occupancy+grid" title="Pages tagged occupancy grid" rel="tag" class = "tag"> occupancy grid </a>  &nbsp
  
  

  </li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  </ul>
  
</div>


<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://https-watsonryan-github-io-researchnotes.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



<div class="wrapper">


<div class = "turn" style = " right: 0px" >
 <a rel = "next" href="/researchNotes/_projects/pollinatorbot/2017/10/09/Update.html"> <span> &rsaquo; </span></a>
</div>





<div class = "turn" style = " left: 0px" >
 <a rel = "prev" href="/researchNotes/_projects/pollinatorbot/2017/09/18/Update.html"> <span> &lsaquo; </span></a>
</div>



</div>


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Research Notes</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Research Notes</li>
          <li><a href="mailto:rwatso12@gmail.com">rwatso12@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/watsonryan">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="$grey-color-light" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">watsonryan</span>
            </a>
          </li>
          

          


<li>
  <a href="/researchNotes/feed.xml">
    <span class="icon icon-feed">
      <svg viewBox="0 0 16 16">
      <circle cx="3" cy="13" r="2" fill="$grey-color-light" />
        <path fill="$grey-color-light" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" d="M8.5,14.5"/>
        <path fill="$grey-color-light"  d="M8.708,15c-0.552,0-1-0.447-1-1c0-3.147-2.561-5.708-5.708-5.708c-0.552,0-1-0.448-1-1s0.448-1,1-1
          c4.25,0,7.708,3.458,7.708,7.708C9.708,14.553,9.261,15,8.708,15L8.708,15z"/>
        <path fill="$grey-color-light"  d="M13.469,14.999c-0.553,0-1-0.447-1-1C12.469,8.227,7.772,3.531,2,3.531c-0.552,0-1-0.448-1-1s0.448-1,1-1
          c6.875,0,12.469,5.593,12.469,12.468C14.469,14.552,14.021,14.999,13.469,14.999L13.469,14.999z"/>
      </svg>
    </span>
    <span class="feed"> RSS feed </span>
  </a>
</li>



        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>

      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0;" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

      <p class="text"><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Research Notes</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://watsonryan.github.io" property="cc:attributionName" rel="cc:attributionURL">Ryan Watson</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>

      </div>



    </div>

  </div>

</footer>


  </body>

</html>
